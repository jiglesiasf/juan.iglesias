---
const { name } = Astro.props;
const links = [
  ["Values", "#values"],
  ["Experience", "#experience"],
  ["iOS", "#ios"],
  ["Education", "#education"],
  ["Certs", "#certs"],
  ["Skills", "#skills"],
  ["Contact", "#contact"]
];
---

<nav class="nav">
  <div class="nav__inner">
    <a class="nav__brand" href="#top">{name}</a>

    <!-- Hamburger (mobile) -->
    <button
      class="nav__hamburger"
      type="button"
      aria-label="Open menu"
      aria-expanded="false"
      aria-controls="nav-links"
    >
      <span></span><span></span><span></span>
    </button>

    <!-- Overlay (mobile) -->
    <div class="nav__overlay" data-nav-overlay></div>

    <!-- Links -->
    <div class="nav__links" id="nav-links">
      {links.map(([label, href]) => (
        <a class="nav__link" href={href}>{label}</a>
      ))}
    </div>
  </div>
</nav>

<script is:inline>
  document.querySelectorAll(".nav").forEach((navEl) => {
    const btn = navEl.querySelector(".nav__hamburger");
    const linksEl = navEl.querySelector(".nav__links");
    const overlay = navEl.querySelector(".nav__overlay");

    if (!btn || !linksEl || !overlay) return;

    function setOpen(open) {
      btn.classList.toggle("is-open", open);
      linksEl.classList.toggle("is-open", open);
      overlay.classList.toggle("is-open", open);
      btn.setAttribute("aria-expanded", String(open));
    }

    btn.addEventListener("click", () => setOpen(!linksEl.classList.contains("is-open")));
    overlay.addEventListener("click", () => setOpen(false));

    linksEl.querySelectorAll("a").forEach((a) => {
      a.addEventListener("click", () => setOpen(false));
    });
  });
</script>

